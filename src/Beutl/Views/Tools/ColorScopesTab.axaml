<UserControl x:Class="Beutl.Views.Tools.ColorScopesTab"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:lang="using:Beutl.Language"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:scopes="using:Beutl.Views.Tools.Scopes"
             xmlns:viewModels="using:Beutl.ViewModels.Tools"
             d:DesignHeight="450"
             d:DesignWidth="800"
             x:CompileBindings="True"
             x:DataType="viewModels:ColorScopesTabViewModel"
             mc:Ignorable="d">
    <UserControl.Resources>
        <SolidColorBrush x:Key="ScopeAxisBrush" Color="#808080" />
        <SolidColorBrush x:Key="ScopeLabelBrush" Color="#A0A0A0" />
        <SolidColorBrush x:Key="ScopeBackgroundBrush" Color="#0A0A0A" />
    </UserControl.Resources>

    <Grid Margin="8" RowDefinitions="Auto,*">
        <Grid ColumnDefinitions="Auto,Auto">
            <ComboBox Grid.Column="0"
                      HorizontalAlignment="Stretch"
                      SelectedIndex="{Binding SelectedScopeType.Value, Converter={x:Static scopes:ScopeTypeConverter.Instance}}">
                <ComboBoxItem Content="{x:Static lang:Strings.Waveform}" />
                <ComboBoxItem Content="{x:Static lang:Strings.Histogram}" />
                <ComboBoxItem Content="{x:Static lang:Strings.Vectorscope}" />
            </ComboBox>

            <!--  Waveform Settings (visible only when Waveform is selected)  -->
            <Grid Grid.Column="1"
                  ColumnDefinitions="Auto,Auto,Auto,Auto"
                  IsVisible="{Binding SelectedScopeType.Value, Converter={x:Static scopes:ScopeTypeConverter.Instance}, ConverterParameter=Waveform}">
                <ComboBox Grid.Column="1"
                          Margin="8,0,0,0"
                          HorizontalAlignment="Stretch"
                          SelectedIndex="{Binding WaveformMode.Value, Converter={x:Static scopes:WaveformModeConverter.Instance}}">
                    <ComboBoxItem Content="{x:Static lang:Strings.Luma}" />
                    <ComboBoxItem Content="{x:Static lang:Strings.RgbOverlay}" />
                    <ComboBoxItem Content="{x:Static lang:Strings.RgbParade}" />
                </ComboBox>
            </Grid>
        </Grid>

        <Border Grid.Row="1"
                Margin="0,8,0,0"
                Padding="8"
                Background="{DynamicResource SolidBackgroundFillColorBase}"
                BorderBrush="{DynamicResource CardStrokeColorDefault}"
                BorderThickness="1"
                CornerRadius="8">
            <Panel>
                <scopes:WaveformControl x:Name="WaveformControl"
                                        AxisBrush="{StaticResource ScopeAxisBrush}"
                                        BackgroundBrush="{StaticResource ScopeBackgroundBrush}"
                                        Gain="{Binding WaveformGain.Value}"
                                        IsVisible="{Binding SelectedScopeType.Value, Converter={x:Static scopes:ScopeTypeConverter.Instance}, ConverterParameter=Waveform}"
                                        LabelBrush="{StaticResource ScopeLabelBrush}"
                                        Mode="{Binding WaveformMode.Value}"
                                        ShowGrid="{Binding WaveformShowGrid.Value}"
                                        SourceBitmap="{Binding SourceBitmap.Value}"
                                        Thickness="{Binding WaveformThickness.Value}" />

                <scopes:HistogramControl x:Name="HistogramControl"
                                         AxisBrush="{StaticResource ScopeAxisBrush}"
                                         BackgroundBrush="{StaticResource ScopeBackgroundBrush}"
                                         IsVisible="{Binding SelectedScopeType.Value, Converter={x:Static scopes:ScopeTypeConverter.Instance}, ConverterParameter=Histogram}"
                                         LabelBrush="{StaticResource ScopeLabelBrush}"
                                         SourceBitmap="{Binding SourceBitmap.Value}" />

                <scopes:VectorscopeControl x:Name="VectorscopeControl"
                                           AxisBrush="{StaticResource ScopeAxisBrush}"
                                           BackgroundBrush="{StaticResource ScopeBackgroundBrush}"
                                           IsVisible="{Binding SelectedScopeType.Value, Converter={x:Static scopes:ScopeTypeConverter.Instance}, ConverterParameter=Vectorscope}"
                                           LabelBrush="{StaticResource ScopeLabelBrush}"
                                           SourceBitmap="{Binding SourceBitmap.Value}" />
            </Panel>
        </Border>
    </Grid>
</UserControl>
